(this.webpackJsonppayra_message=this.webpackJsonppayra_message||[]).push([[0],{34:function(e,t,s){},39:function(e,t,s){},50:function(e,t,s){"use strict";s.r(t);var a=s(11),i=s.n(a),n=s(19),c=s.n(n),h=(s(34),s(13)),l=s.n(h),d=s(20),r=s(15),o=s(21),u=s(24),m=s(25),j=s(8),b=s(29),f=s(28),p=s(26),g=s.n(p),v=s(16);v.a.initializeApp({apiKey:"AIzaSyBDVmBjwNEDNWiKDKyPWJjj8BJXsOPRdBM",authDomain:"payra-c5691.firebaseapp.com",projectId:"payra-c5691",storageBucket:"payra-c5691.appspot.com",messagingSenderId:"157209052155",appId:"1:157209052155:web:3877a3d34f37c9e835c15e",measurementId:"G-JCVE0EYKLQ"});v.a.auth;var O=v.a.database(),x=(s(39),s.p+"static/media/logo.6ce24c58.svg"),_=s.p+"static/media/again.5085c9ba.png",y=s.p+"static/media/home.28971f03.png",S=s.p+"static/media/friend.de077105.png",k=s.p+"static/media/user.b5a08b5c.png",N=s(10),w=s.n(N),C=s(2);function D(e,t){var s,a;return e.length>t.length?(s=e,a=t):e.length!=t.length?(s=t,a=e):e>t?(s=e,a=t):(s=t,a=e),s+"_"+a}function E(e){var t="";return e.includes("kost")?t="Inshallah sob thik hoye jabe":e.includes("hotash")&&(t="Inshallah hotasha kete  jabe"),t}function T(e){for(var t=e.length-1;" "==e[t];)t--;return e=e.substring(0,t+1)}var B,F=function(e){Object(b.a)(s,e);var t=Object(f.a)(s);function s(e){var a;return Object(u.a)(this,s),(a=t.call(this,e)).scrollToBottom=function(){if(a.state.found&&a.state.selected){var e=document.getElementById("chatList");e.scrollTop=e.scrollHeight}},a.state={me:"",chats:[],content:"",selected:!1,friend:"",friend_key:"",found:!1,pass:"",special_mess:null,search:"",chat_friend:[],signup:!0,add_friend:!1,my_date:"",last_active:"",logout:!1,now_chatting_friend:"",typing:""},a.handleFriend=a.handleFriend.bind(Object(j.a)(a)),a.submit_friend=a.submit_friend.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(j.a)(a)),a.handle_me=a.handle_me.bind(Object(j.a)(a)),a.submit_me=a.submit_me.bind(Object(j.a)(a)),a.handle_pass=a.handle_pass.bind(Object(j.a)(a)),a.handle_search=a.handle_search.bind(Object(j.a)(a)),a.submit_search=a.submit_search.bind(Object(j.a)(a)),a.refresh=a.refresh.bind(Object(j.a)(a)),a.home=a.home.bind(Object(j.a)(a)),a.handle_chat=a.handle_chat.bind(Object(j.a)(a)),a.show=a.show.bind(Object(j.a)(a)),a.handleSignup=a.handleSignup.bind(Object(j.a)(a)),a.today_timing=a.today_timing.bind(Object(j.a)(a)),a.log_handle=a.log_handle.bind(Object(j.a)(a)),a.log_out=a.log_out.bind(Object(j.a)(a)),a.show=a.show.bind(Object(j.a)(a)),a}return Object(m.a)(s,[{key:"today_timing",value:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();this.setState({my_date:t})}},{key:"handleSignup",value:function(){var e=this;if(""==this.state.me||""==this.state.pass)w()(Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Username or password can't be empty"})}));else if(this.state.signup){var t=O.ref("chats").child("user_details").child(T(this.state.me));t.once("value").then((function(t){1!=t.exists()?(e.setState({me:T(e.state.me)}),e.setState({pass:T(e.state.pass)}),O.ref("chats").child("user_details").child(e.state.me).child("username").set(e.state.me),O.ref("chats").child("user_details").child(e.state.me).child("start_date").set(Date.now()),O.ref("chats").child("user_details").child(e.state.me).child("password").set(e.state.pass),e.setState({signup:!1}),w()(Object(C.jsxs)("div",{children:[Object(C.jsxs)("h1",{children:["Hello! ",e.state.me]}),Object(C.jsx)("p",{children:"Account has created"})]})),e.setState({found:!0})):w()(Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[e.state.me," already exists! Try another one ."]})}))}))}else this.setState({signup:!1}),this.submit_me()}},{key:"handle_search",value:function(e){this.setState({search:e.target.value})}},{key:"handle_me",value:function(e){this.setState({me:e.target.value})}},{key:"handle_pass",value:function(e){this.setState({pass:e.target.value})}},{key:"show",value:function(){var e=this;O.ref("chats").child("user_details").child(this.state.me).child("chat_friend").on("value",(function(t){var s=[];t.forEach((function(e){s.push(e.val())})),e.setState({chat_friend:s})})),this.setState({signup:!1}),this.setState({search:""}),this.setState({selected:!1,add_friend:!1,friend:"",friend_key:""}),w()(Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Please refresh the page to see the latest messages of your friends"})}))}},{key:"submit_me",value:function(){var e=this;if(""==this.state.pass||""==this.state.me)w()(Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Password or Username can't be empty !!"})}));else if(this.today_timing(),console.log("this is me"+this.state.me),this.state.signup)this.handleSignup();else{var t=O.ref("chats").child("user_details").child(T(this.state.me));t.once("value").then((function(t){t.exists()?(console.log("Dhukbo"),O.ref("chats").child("user_details").child(T(e.state.me)).child("password").once("value").then((function(t){console.log("dekhao to"+t.val()),null!==t.val()&&t.val()!==T(e.state.pass)?w()(Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:["Your password for account ",e.state.me," is wrong , try again !"]})})):null!==t.val()&&t.val()==T(e.state.pass)&&(O.ref("chats").child("user_details").child(e.state.me).child("log_out").set(!1),e.state.me,!0,e.setState({found:!0}),w()(Object(C.jsxs)("div",{children:[Object(C.jsxs)("h1",{children:["Assalamu alaikum ",e.state.me]}),Object(C.jsx)("p",{children:"Welcome to Payra"})]})))}))):(w()(Object(C.jsxs)("div",{children:[Object(C.jsxs)("h1",{children:[e.state.me," account doesn't exist."]}),Object(C.jsx)("p",{children:"To create account , signup "})]})),e.setState({signup:!0}))}))}}},{key:"handleFriend",value:function(e){this.setState(Object(o.a)(Object(o.a)({},this.state),{},Object(r.a)({},e.target.name,e.target.value)))}},{key:"submit_friend",value:function(){var e=this;if(""==this.state.friend)w()(Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Friend's username can't be empty"})}));else{this.setState({pass:""}),this.setState({friend:T(this.state.friend)});var t=this.state.friend,s=O.ref("chats").child("user_details").child(t);if(s.once("value").then((function(t){1==t.exists()?(e.state.add_friend||w()(Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[e.state.friend," exist in the Payra . Now you can add him"]})})),e.setState({add_friend:!0})):w()(Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[e.state.friend," doesn't exist in the Payra"]})}))})),this.state.add_friend){var a=!1;O.ref("chats").child("user_details").child(this.state.me).child("chat_friend").on("value",(function(t){t.forEach((function(t){t.val().name===e.state.friend&&(a=!0)}))})),a?w()(Object(C.jsx)("div",{children:Object(C.jsxs)("p",{children:[this.state.friend," is already your friend,search him in your friend list"]})})):(O.ref("chats").child("user_details").child(this.state.me).child("chat_friend").push({name:t}),console.log("done 1"),O.ref("chats").child("user_details").child(t).child("chat_friend").push({name:this.state.me}),console.log("done 2"))}}}},{key:"handleChange",value:function(e){this.setState({content:e.target.value})}},{key:"handleSubmit",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var s,a=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),O.ref("chats").child("chat_details").child(this.state.friend_key).push({content:this.state.content,timestamp:Date.now(),uid:this.state.me,status:!1}),s=E(this.state.content),this.setState({special_mess:s}),console.log("last one"+this.state.content),this.setState({content:""}),this.state.selected&&O.ref("chats").child("chat_details").child(this.state.friend_key).on("value",(function(e){var t=[];e.forEach((function(e){void 0==e.val().content&&null==e.val().content||t.push(e.val())})),a.setState({chats:t}),a.scrollToBottom()}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"submit_search",value:function(){for(var e=this.state.chats,t=e.length-1,s=this.state.search,a=0;a<this.state.chats.length;a++)if(e[a].content.includes(s)){t=a;break}var i=document.getElementById(t.toString());i&&i.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"-").concat(t.getMonth()+1,"-").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"refresh",value:function(){this.setState({signup:!1}),this.setState({add_friend:!1}),this.setState({search:""}),this.scrollToBottom()}},{key:"home",value:function(){this.setState({selected:!1,found:!1,add_friend:!1})}},{key:"log_handle",value:function(){this.setState({signup:!1})}},{key:"componentDidUpdate",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""==this.state.search&&(this.state.selected?(console.log("matro dhuklam did e"+this.state.friend_key),t=this.state.me,O.ref("chats").child("chat_details").child(this.state.friend_key).once("value",(function(e){e.forEach((function(e){e.val().uid!=t&&e.ref.update({status:!0})}))})),this.scrollToBottom()):console.log("Checking"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handle_chat",value:function(e){var t=this;B=D(e.target.id,this.state.me),console.log("chating_handle e target"+e.target),O.ref("chats").child("chat_details").child(B).on("value",(function(e){var s=[];e.forEach((function(e){void 0==e.val().content&&null==e.val().content||s.push(e.val())})),t.setState({chats:s}),t.scrollToBottom()})),this.setState({friend_key:D(e.target.id,this.state.me)}),this.setState({now_chatting_friend:e.target.id}),this.setState({selected:!0}),O.ref("chats").child("user_details").child(T(e.target.id)).child("log_out").once("value").then((function(e){console.log("dekhao to"+e.val()),t.setState({logout:e.val()})})),O.ref("chats").child("user_details").child(T(e.target.id)).child("last_active").once("value").then((function(e){console.log("dekhao to"+e.val()),t.setState({last_active:e.val()})}))}},{key:"log_out",value:function(){this.setState({found:!1}),this.setState({selected:!1}),this.setState({me:""});var e=this.state.me;console.log(" Eita ami "+e),console.log(Date.now()),O.ref("chats").child("user_details").child(e).child("last_active").set(Date.now()),O.ref("chats").child("user_details").child(e).child("log_out").set(!0),w()(Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Succesfully Logging Out"})}))}},{key:"onKeyPressed",value:function(e){this.setState({})}},{key:"render",value:function(){var e,t=this,s="  active at "+this.formatTime(this.state.last_active);e=this.state.logout?Object(C.jsx)("div",{className:"containerrr",children:Object(C.jsxs)("p",{className:"i",children:["   ",this.state.now_chatting_friend," was  ",s,"  "]})}):Object(C.jsx)("div",{className:"containerrr",children:Object(C.jsxs)("p",{className:"i",children:["    ",this.state.now_chatting_friend,"  is active now  "]})});for(var a=[],i=0;i<this.state.chat_friend.length;i++)a[i]=Object(C.jsxs)("li",{id:this.state.chat_friend[i].name,className:"container_vau",onClick:this.handle_chat,children:[Object(C.jsx)("img",{id:this.state.chat_friend[i].name,src:k,alt:"Anonymous"})," ",Object(C.jsx)("p",{id:this.state.chat_friend[i].name,children:this.state.chat_friend[i].name})]});for(var n,c=Object(C.jsxs)("div",{className:"in",children:[" ",Object(C.jsxs)("div",{className:"body",children:[Object(C.jsx)("input",{className:"inp",name:"friend",type:"text",onChange:this.handleFriend,placeholder:"write your friend's name",value:this.state.friend}),Object(C.jsx)("button",{style:{borderRadius:"20px"},onClick:this.submit_friend,children:this.state.add_friend?"Add":"Search friend"})]})]}),h=Object(C.jsx)("button",{style:{borderRadius:"20px"},onClick:this.log_out,children:"Log Out"}),l=Object(C.jsxs)("div",{className:"App-header",children:[Object(C.jsx)("img",{src:x,className:"App-logo",alt:"logo"}),Object(C.jsxs)("div",{className:"start",children:[Object(C.jsx)("label",{htmlFor:"uname",className:"in",children:Object(C.jsx)("b",{children:"Username"})}),Object(C.jsx)("input",{style:{borderRadius:"10px"},type:"text",placeholder:"Enter Username",name:"uname",required:!0,onChange:this.handle_me,value:this.state.me}),Object(C.jsx)("label",{htmlFor:"psw",className:"in",children:Object(C.jsx)("b",{children:"Password"})}),Object(C.jsx)("input",{style:{borderRadius:"10px"},type:"password",placeholder:"Enter Password",name:"psw",required:!0,onChange:this.handle_pass}),Object(C.jsx)("div",{children:Object(C.jsx)("button",{style:{borderRadius:"30px"},type:"submit",onClick:this.handleSignup,className:"in",children:this.state.signup?"Sign Up":"Login"})}),this.state.signup?Object(C.jsx)("p",{onClick:this.log_handle,children:"               Have account ?  Log in "}):null]})]}),d=[],r=0;r<this.state.chats.length;r++){n=this.state.chats[r].content;var o=Object(C.jsx)("div",{id:r.toString(),children:Object(C.jsxs)("li",{className:"other",children:[" ",Object(C.jsxs)("div",{className:"msg",children:[Object(C.jsxs)("p",{style:{color:"green"},children:["  ",this.state.chats[r].uid]}),Object(C.jsx)("div",{className:"messge",children:this.state.chats[r].content}),Object(C.jsx)("span",{className:"timeStampRight",children:this.formatTime(this.state.chats[r].timestamp)})]})]})}),u=Object(C.jsx)(g.a,{onInit:function(e){e.typeString(n).callFunction((function(){console.log("String typed out!")})).start()}}),m=Object(C.jsx)("div",{id:r.toString(),children:Object(C.jsx)("li",{className:"self",children:Object(C.jsxs)("div",{className:"msg",children:[0==this.state.chats[r].status?Object(C.jsxs)("p",{style:{color:"red"},children:["  ",this.state.chats[r].uid]}):Object(C.jsxs)("p",{children:["  ",this.state.chats[r].uid]}),Object(C.jsx)("div",{className:"messge",children:this.state.chats[r].content}),Object(C.jsx)("span",{className:"timeStampRight",children:this.formatTime(this.state.chats[r].timestamp)})]})})}),j=Object(C.jsx)("div",{id:r.toString(),children:Object(C.jsxs)("li",{className:"other",children:[" ",Object(C.jsxs)("div",{className:"msg",children:[Object(C.jsxs)("p",{style:{color:"green"},children:["  ",this.state.chats[r].uid]}),Object(C.jsx)("div",{className:"messge",children:u}),Object(C.jsx)("span",{className:"timeStampRight",children:this.formatTime(this.state.chats[r].timestamp)})]})]})});r!=this.state.chats.length-1?this.state.chats[r].uid==this.state.me?d.push(m):d.push(o):this.state.chats[r].uid==this.state.me?d.push(m):this.state.logout?d.push(o):d.push(j)}var b=Object(C.jsx)("span",{className:"messages",children:this.state.special_mess});d.push(b);var f=Object(C.jsxs)("div",{className:"do",children:[Object(C.jsx)("img",{className:"round_img",src:_,onClick:this.refresh}),Object(C.jsx)("img",{className:"round_img",src:y,onClick:this.home}),Object(C.jsx)("img",{className:"round_img",src:S,onClick:this.show})]});return Object(C.jsxs)("div",{children:[this.state.found?null:l,this.state.found&&!this.state.selected?h:null,this.state.found&&!this.state.selected?Object(C.jsx)("div",{children:c}):null,this.state.found&&!this.state.selected?f:null,this.state.found&&!this.state.selected?Object(C.jsxs)("div",{className:"ulll in",children:[Object(C.jsx)("div",{children:Object(C.jsx)("p",{children:"Your friends"})}),a]}):null,this.state.selected?Object(C.jsxs)("div",{className:"body",children:[this.state.found&&this.state.selected?e:null,Object(C.jsxs)("div",{className:"chatWindow",children:[Object(C.jsx)("div",{className:"chat",id:"chatList",children:d}),Object(C.jsx)("div",{className:"chatInputWrapper",children:Object(C.jsxs)("form",{className:"inputiing",onSubmit:this.handleSubmit,children:[Object(C.jsx)("input",{onKeyDown:function(e){return t.onKeyPressed(e)},className:"textarea input",type:"text",placeholder:"Enter your message...",onChange:this.handleChange,value:this.state.content}),Object(C.jsx)("button",{className:"sendd",onClick:this.handleSubmit,children:"Send"})]})})]}),Object(C.jsx)("div",{className:"inputiing"}),Object(C.jsxs)("div",{className:"friending",children:[Object(C.jsx)("input",{className:"inp in",name:"friend",type:"text",onChange:this.handle_search,placeholder:"Search something in chat"}),Object(C.jsx)("button",{style:{borderRadius:"20px"},onClick:this.submit_search,className:"in",children:"Search"})," ",f]})," "]}):null]})}}]),s}(a.Component),I=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,51)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;s(e),a(e),i(e),n(e),c(e)}))};c.a.render(Object(C.jsx)(i.a.StrictMode,{children:Object(C.jsx)(F,{})}),document.getElementById("root")),I()}},[[50,1,2]]]);
//# sourceMappingURL=main.aa88fcd3.chunk.js.map